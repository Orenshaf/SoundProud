webpackJsonp([11],{864:function(e,t,i){e.exports=i(865)},865:function(e,t,i){(function(e){!function(e){var t,i,s,r,o,n,a,h,u,l,c,g,m,d,f,p,v,b,x,w,C,R,S,I,E,P,k,y,T,D,O;!function(){t=function(e,t){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var r=arguments[s];if(null!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},i=function(){return window}(),s=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)})},r=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&(t[t.length]=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},o=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)"),s=i.exec(t);return null===s?"":decodeURIComponent(s[1].replace(/\+/g," "))},n=function(e){var t={staticAssetPath:"https://a0.awsstatic.com",jsAssetPath:"https://a0.awsstatic.com/libra/1",isLoggingEnabled:!0},i={};"object"==typeof AWS&&"object"==typeof AWS.PageSettings&&e(i,AWS.PageSettings);var s=document.getElementsByTagName("html").dataset;return s&&(i.staticAssetPath=s.staticAssets,i.jsAssetPath=i.staticAssetPath+"/libra/"+s.jsVersion),i=e({},t,i),"object"==typeof AWS&&"object"==typeof AWS.PageSettings&&(AWS.PageSettings=i),i}(t),a=function(t,i,s,r,o,n){return function(){function a(e,t){if(C.hasOwnProperty(e))return C[e].logLevel=t||C[e].logLevel,C[e];this.namespace=e,this.logLevel=t||this.getLogLevelByQueryString(),this.pageRequestId=this.getPageRequestId(),this.dataSet=this.getDataSet(),this.service=this.getService(),this.instance=this.getInstance(this.service),this.longLanguage=this.getLongLanguage(),this.client=this.getClient(),this.host=this.getHost(),C[e]=this}var h={info:{warn:!0,error:!0},warn:{error:!0},error:{},debug:{info:!0,warn:!0,error:!0}},u="https://fls-na.amazon.com/1/aws-mktg/1/OE/",l="https://fls-na.amazon.com/1/action-impressions/1/OE/aws-mktg/action/",c={marketplaceId:"A12QK8IU0H0XW5",requestId:"ABCDEFGHIJKLMNOPQRST",session:"123-1234567-1234567"},g={count:{value:"1",units:"c"},timeSinceResponseEnd:{valueFunction:"getElapsedTimeSincePageLoad",units:"ms"}},m=[{hostname:"console.aws.amazon.com",service:"console"},{hostname:"aws.amazon.com",service:"awsm"},{hostname:"www.amazonaws.cn",service:"cn"}],d={RAW:"RAW",AI:"AI",LOCAL:"LOCAL"},f={CMS:"CMS",DEFAULT:"DEFAULT"},p={awsm:f.CMS,cn:f.CMS,console:f.DEFAULT,marketplace:f.CMS},v=/console\.(aws\.amazon\.com|amazonaws\.cn)\/([a-z0-9]+)\//,b=["console.aws.amazon.com","console.amazonaws.cn"],x={"aws.amazon.com":1,"www.amazonaws.cn":1},w=null,C={};a.prototype={getService:function(){if(void 0!==t.location.hostname&&void 0!==t.location.pathname){if(n.isMarketplace)return"marketplace";var e=(t.location.hostname+t.location.pathname).match(v);if(e&&3===e.length)return"console-"+e[2]}for(var i=0,s=m.length;i<s;i++){var r=m[i].hostname,o=new RegExp(r+"\\/");if(o.test(t.location.hostname+"/")||o.test(t.location.pathname)||o.test(t.location.hash))return m[i].service}return"NA"},getHost:function(){if(void 0!==t.location.hostname){var e=t.location.hostname;if(x.hasOwnProperty(e))return e;for(var i=0;i<b.length;i++){var s=b[i],r=e.indexOf(s);if(r>=0&&r===e.length-s.length)return s}}return"NA"},getLongLanguage:function(){var t=e("html").attr("lang");return void 0!==t?t.replace("-","_"):"NA"},getInstance:function(e){var i=f.DEFAULT;return p.hasOwnProperty(e)&&(i=p[e]),i===f.CMS&&t.location.pathname.indexOf(".html")===t.location.pathname.length-5?"logInstance"in n?n.logInstance:"NA":"LIVE"},getDataSet:function(){return"logDataSet"in n?n.logDataSet:"NA"},getClient:function(){return new RegExp(/iPhone|iPod|iPad|Android|(?=.*\bAndroid\b)(?=.*\bMobile\b)|IEMobile|(?=.*\bWindows\b)(?=.*\bTouch\b)|Windows Phone|Opera Mini|(?=.*\bFirefox\b)(?=.*\bMobile\b)|BlackBerry|Nexus 7|BNTV250|Kindle Fire|Silk|webOS|GT-P1000/i).test(t.navigator.userAgent)?"mobile":"dsk"},logAI:function(e,t){t=t||{};var s;t.hasOwnProperty("valueSet")?g.hasOwnProperty(t.valueSet)?(s=g[t.valueSet],t.units=s.units,s.hasOwnProperty("valueFunction")?t.value=this[s.valueFunction]():t.value=s.value):(s=g.count,t.value=s.value,t.units=s.units):t.hasOwnProperty("value")||(s=g.count,t.value=s.value,t.units=s.units),t.hasOwnProperty("units")||(t.units="ms");var o=l+e+"@v="+encodeURIComponent(t.value)+":u="+encodeURIComponent(t.units),n={dataset:this.dataSet,instance:this.instance,service:this.service,marketplace:this.longLanguage,client:this.client,host:this.host},a=i(n,c);o+="?"+r(a),this.logUrl(o)},logRaw:function(e,s,o,n,a){var h={cat:this.namespace,level:e,msg:s,currentTime:o,pageTime:n,pageRequestId:w,page:t.location.toString()},l=i({},a,h),c=u+"?"+r(l);this.logUrl(c)},logUrl:function(e){n.isLoggingEnabled&&(setTimeout(function(){(new Image).src=e},0),this._lastImageUrl=e)},getLogLevelByQueryString:function(){var e=o("debug"+this.namespace,t.location.search);return""===e?null:e},getElapsedTimeSincePageLoad:function(){return"performance"in t&&"timing"in t.performance?(new Date).getTime()-t.performance.timing.responseEnd:-1},getPageRequestId:function(){return w=w||s()},_rawEndpoint:u,_aiEndpoint:l};for(var R in h)h.hasOwnProperty(R)&&function(e){a.prototype[e]=function(t,i,s){i=i||"LOCAL";var r=(new Date).getTime(),o=this.getElapsedTimeSincePageLoad(),n=e.toUpperCase();if(i===d.AI?this.logAI(t,s):i===d.RAW&&this.logRaw(n,t,r,o,s),null!==this.logLevel&&(e===this.logLevel||h[this.logLevel].hasOwnProperty(e)))if(d.hasOwnProperty(i)){var a="["+n+"]["+d[i]+"] "+this.namespace+": "+t+"; @"+o+"ms";void 0!==s&&(a+="; "+JSON.stringify(s)),console.log(a),this._lastConsoleLog=a}else{var u=Array.prototype.slice.call(arguments),l="["+n+"]["+d.LOCAL+"] "+this.namespace+": "+u[0];console.log(l,[].concat(u.slice(1)))}}}(R);return a}()}(i,t,s,r,o,n),h=function(){return"object"!=typeof AWS&&(AWS={}),AWS}(),u=function(){return{generateRandomId:function(){return(new Date).getTime()+"-"+Math.floor(999999*Math.random())}}}(),l=function(){return{hasCORSSupport:function(){return"withCredentials"in new XMLHttpRequest}}}(),c=function(){return document}(),g=function(e){function t(t,s){var r=JSON.parse(JSON.stringify(i));for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o]);this.options=r,this.name=t,this.exists=!1,this.rawValue=null,this.value=null,"localhost"===window.location.hostname&&(this.options.domain=""),e.cookie.length&&-1!==e.cookie.indexOf(this.name)&&(this.exists=!0)}var i={domain:".amazon.com",path:"/",expireSeconds:86400};return t.prototype={write:function(){var t;"number"==typeof this.options.expireSeconds&&(t=new Date,t.setSeconds(t.getSeconds()+this.options.expireSeconds));var i=e.cookie=[this.name,"=",this.rawValue,t?"; expires="+t.toUTCString():"",this.options.path?"; path="+this.options.path:"",this.options.domain?"; domain="+this.options.domain:""].join("");return i&&(this.exists=!0),i},read:function(){var t=!1;if(e.cookie.length){var i=e.cookie.indexOf(this.name);if(-1!==i){t=!0;var s=i+this.name.length+1,r=e.cookie.indexOf(";",s);-1===r&&(r=e.cookie.length),this.rawValue=e.cookie.substring(s,r)}}return t||(this.exists=!1),t},remove:function(){this.options.expireSeconds=-1;var e=this.write();return e&&(this.exists=!1),e},encode:function(){this.rawValue=encodeURIComponent(this.value)},decode:function(){try{this.value=decodeURIComponent(this.rawValue)}catch(e){throw new Error("CookieManagerDecodeError: Failed to decode cookie '"+this.name+"'")}},stringify:function(){try{this.rawValue=JSON.stringify(this.value),this.rawValue=encodeURIComponent(this.rawValue)}catch(e){throw new Error("CookieManagerStringifyError: Failed to stringify cookie '"+this.name+"'")}},parse:function(){try{this.value=decodeURIComponent(this.rawValue),this.value=JSON.parse(this.value)}catch(e){throw new Error("CookieManagerParseError: Failed to parse cookie '"+this.name+"'")}}},t}(c),m=function(e,t,i){return{registrationStatus:function(){if(void 0!==t.CurrentUser&&void 0!==t.CurrentUser.registrationStatus)return t.CurrentUser.registrationStatus;var e=new i("regStatus");return e.exists?(e.read(),e.rawValue):"pre-register"}(),isIAMUser:function(){return void 0!==t.CurrentUser&&void 0!==t.CurrentUser.isIAMUser?t.CurrentUser.isIAMUser:new i("aws-account-alias").exists}()}}(0,h,g),d=function(e,t){function i(){this.logger=new e("TargetMediator"),this.expireSeconds=33696e3,this.cookie=new t("aws-target-data",{expireSeconds:this.expireSeconds}),this.values={},this.allowedKeys={support:null,campaignId:null,environmentId:null,mboxPage:null,mbox:null},this.read()}return i.prototype={read:function(){try{this.cookie.read(),null!==this.cookie.rawValue&&(this.cookie.parse(),this.setValues(this.cookie.value))}catch(e){this.cookie.remove(),this.logger.error("awsm_:tm_CorruptDataCookieError","AI",{msg:e.message})}},write:function(e){this.setValues(e),this.cookie.value=this.values,this.cookie.stringify(),this.cookie.write()},setValues:function(e){for(var t in e)e.hasOwnProperty(t)&&t in this.allowedKeys&&(void 0===e[t]||null===e[t]?delete this.values[t]:this.values[t]=e[t])},hasCompleteParamsSet:function(){for(var e=["campaignId","environmentId","mboxPage","mbox"],t=0,i=e.length;t<i;t++)if(!this.values[e[t]])return!1;return!0}},i}(a,g),f=function(){return{isValidVisitorId:function(e){return/^[0-9\-]{6,40}(\.[0-9]{1,3}_[0-9]{1,3})?$/.test(e)},isValidSessionId:function(e){return/^[0-9\-]{6,40}$/.test(e)}}}(),p=function(e,t,i,s,r,o,n){function a(e,t){this.logger=new s("TargetMediator"),this.dataCookie=e,this.customParams=t,this.mboxPCId=null,this.mboxSessionId=null,this.mboxPageId=null,this.mboxXDomain=null,this.mboxNoRedirect=null,this.mboxHost=null,this.screenWidth=null,this.screenHeight=null,this.screenColorDepth=null,this.browserWidth=null,this.browserHeight=null,this.browserTimeOffset=null,this.currentUrl=null,this.referringUrl=null,this.sessionCookie=new r("aws-target-session-id",{expireSeconds:1800}),this.visitorCookie=new r("aws-target-visitor-id",{expireSeconds:33696e3})}return a.prototype={fetch:function(){this.mboxXDomain=this.getMboxXDomain(),this.mboxNoRedirect=this.getMboxNoRedirect(),this.mboxHost=this.getHostname(),this.screenWidth=this.getScreenWidth(),this.screenHeight=this.getScreenHeight(),this.screenColorDepth=this.getScreenColorDepth(),this.browserWidth=this.getBrowserWidth(),this.browserHeight=this.getBrowserHeight(),this.browserTimeOffset=this.getBrowserTimeOffset(),this.currentUrl=this.getCurrentUrl(),this.referringUrl=this.getReferringUrl(),this.dataCookie.read(),this.pageMboxName=this.getPageMboxName(),this.mboxPageId=this.getMboxPageId(),this.campaignId=this.getCampaignId(),this.environmentId=this.getEnvironmentId(),this.sessionCookie.read(),this.getSessionId(),this.visitorCookie.read(),this.getVisitorId()},getClientParamsSet:function(){var e={mboxPC:this.mboxPCId,mboxSession:this.mboxSessionId,mboxPage:this.mboxPageId,mboxXDomain:this.mboxXDomain,mboxNoRedirect:this.mboxNoRedirect,mboxHost:this.mboxHost,screenWidth:this.screenWidth,screenHeight:this.screenHeight,colorDepth:this.screenColorDepth,browserWidth:this.browserWidth,browserHeight:this.browserHeight,browserTimeOffset:this.browserTimeOffset,mboxUrl:this.currentUrl,mboxReferrer:this.referringUrl};return i({},this.customParams,e)},getServerParamsSet:function(){var e={mboxPC:this.mboxPCId,mboxSession:this.mboxSessionId,mboxPage:this.mboxPageId,mboxXDomain:this.mboxXDomain,mboxNoRedirect:this.mboxNoRedirect,mboxHost:this.mboxHost,browserTimeOffset:this.browserTimeOffset,mboxUrl:this.currentUrl,mboxReferrer:this.referringUrl};return i({},this.customParams,e)},getPageMboxParamsSet:function(){return{pageMboxName:this.pageMboxName,campaignId:this.campaignId,environmentId:this.environmentId}},generateMboxPCId:function(){return o.generateRandomId()},generateMboxSessionId:function(){return o.generateRandomId()},getMboxPageId:function(){var e=this.dataCookie.values.mboxPage;return void 0===e||null===e||""===e?o.generateRandomId():e},getMboxXDomain:function(){return"disabled"},getMboxNoRedirect:function(){return 1},getScreenWidth:function(){return e.screen.width},getScreenHeight:function(){return e.screen.height},getScreenColorDepth:function(){return e.screen.pixelDepth},getBrowserWidth:function(){return e.innerWidth?e.innerWidth:t.documentElement?t.documentElement.clientWidth:t.body.clientWidth},getBrowserHeight:function(){return e.innerHeight?e.innerHeight:t.documentElement?t.documentElement.clientHeight:t.body.clientHeight},getBrowserTimeOffset:function(){return-(new Date).getTimezoneOffset()},getCurrentUrl:function(){return e.location.toString()},getReferringUrl:function(){var e=t.referrer;return e.length<2e3?e:""},getHostname:function(){return e.location.hostname},getSessionId:function(){var e=!1;if(this.sessionCookie.exists){try{this.sessionCookie.decode()}catch(t){e=!0,this.logger.error("awsm_:tm_UndecodableExistingSessionIdError","AI",{sessionId:this.sessionCookie.rawValue})}e||(n.isValidSessionId(this.sessionCookie.value)?this.mboxSessionId=this.sessionCookie.value:(e=!0,this.logger.error("awsm_:tm_InvalidExistingSessionIdError","AI",{sessionId:this.sessionCookie.value})))}else e=!0,this.logger.debug("Cookie '"+this.sessionCookie.name+"' does not exist yet so create it");e&&(this.mboxSessionId=this.generateMboxSessionId(),this.sessionCookie.value=this.mboxSessionId,this.sessionCookie.encode()),this.sessionCookie.write()},getVisitorId:function(){var e=!1;if(this.visitorCookie.exists){try{this.visitorCookie.decode()}catch(t){e=!0,this.logger.error("awsm_:tm_UndecodableExistingVisitorIdError","AI",{visitorId:this.visitorCookie.rawValue})}e||(n.isValidVisitorId(this.visitorCookie.value)?this.mboxPCId=this.visitorCookie.value:(e=!0,this.logger.error("awsm_:tm_InvalidExistingVisitorIdError","AI",{visitorId:this.visitorCookie.value})))}else e=!0,this.logger.debug("Cookie '"+this.visitorCookie.name+"' does not exist yet so create it");e&&(this.mboxPCId=this.generateMboxPCId(),this.visitorCookie.value=this.mboxPCId,this.visitorCookie.encode()),this.visitorCookie.write()},getPageMboxName:function(){return this.dataCookie.values.mbox},getCampaignId:function(){return this.dataCookie.values.campaignId},getEnvironmentId:function(){return this.dataCookie.values.environmentId}},a}(i,c,t,a,g,u,f),v=function(e,t){return"object"!=typeof e||"object"!=typeof t?e:(Object.keys(t).forEach(function(i){e.hasOwnProperty(i)||(e[i]=t[i])}),e)},b=function(){function e(t){var i;for(i in t.events)t.events.hasOwnProperty(i)&&(t.events[i].isActive=!0);for(i in t.events)if(t.events.hasOwnProperty(i)){var s=t.events[i];s.isActive&&(s.condition()?s.resolve():(new Date).getTime()-s.startTime>s.timeout&&s.reject())}var r=!1;for(i in t.events)if(t.events.hasOwnProperty(i)){r=!0;break}r?setTimeout(function(){e(t)},t.interval):t.isPolling=!1}var t={},i=0;return{register:function(s,r,o,n,a){var h,u={key:(++i).toString(),isActive:!1,startTime:(new Date).getTime(),condition:s,done:r,fail:o,timeout:n,interval:a,resolve:function(){var e=this.done;this.destroy(),e()},reject:function(){var e=this.fail;this.destroy(),e()},destroy:function(){delete t[this.interval].events[this.key]}};t.hasOwnProperty(a)?h=t[a]:(h={},h.events={},h.interval=a,h.isPolling=!1,t[a]=h),h.events[u.key]=u,h.isPolling||(h.isPolling=!0,e(h))},_pollGroups:t}}(),x=function(){return{PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected",TIMEOUT:"timeout"}}(),w=function(t,i,s,r){var o=new i("TargetMediator");return{mboxRegistry:{},mboxClickRegistry:{},pageTimeout:3e4,allMboxesResolved:function(){for(var e in this.mboxRegistry)if(this.mboxRegistry.hasOwnProperty(e)&&this.mboxRegistry[e].state===r.PENDING)return!1;return!0},allClicksResolved:function(){for(var e in this.mboxClickRegistry)if(this.mboxClickRegistry.hasOwnProperty(e)&&this.mboxClickRegistry[e].state===r.PENDING)return!1;return!0},hasEncounteredPageEnd:function(e){if(!0!==e)return this._seenPageEnd;this._seenPageEnd=!0,o.debug("Seen page end")},checkJqueryReadyHold:function(){this.hasEncounteredPageEnd()&&this.allMboxesResolved()&&(e.holdReady(!1),o.debug("Release jQuery ready"))},hideAllMboxes:function(){e('<style class="js-mbox-style">.js-mbox{visibility:hidden;}</style>').appendTo(t.head)},showAllMboxes:function(){e('<style class="js-mbox-style">.js-mbox{visibility:visible;}</style>').appendTo(t.head)},findMboxes:function(t,i){this.hasEncounteredPageEnd(!0);for(var s=e(".js-mbox:not([data-mbox-registered])"),r=0,o=s.length;r<o;r++){var n=e(s[r]);n.attr("data-mbox-registered","true"),new t(n,i).fetch()}},pollToFindMboxes:function(i,r){var n=this;s.register(function(){for(var s=e(".js-mbox:not([data-mbox-registered])"),o=0,n=s.length;o<n;o++){var a=e(s[o]);a.attr("data-mbox-registered","true"),new i(a,r).fetch()}return!!t.getElementById("aws-page-end")},function(){n.hasEncounteredPageEnd(!0),r.options.holdJqueryReady&&n.checkJqueryReadyHold()},function(){o.error("awsm_:tm_PageEndTimeoutError","AI",{msg:"Failed to recognize page end within the timeout"}),r.options.holdJqueryReady&&e.holdReady(!1)},this.pageTimeout,100)},_seenPageEnd:!1}}(c,a,b,x),C=function(e,t,i,s,r){var o=new t("TargetMediator");return{additionalParameters:{},getMboxTime:function(){var e=new Date;return e.getTime()-6e4*e.getTimezoneOffset()},getMboxTarget:function(){return this.campaignId},getMboxParamsSet:function(e){var t={mbox:this.name,mboxTime:this.time};for(var i in this.additionalParameters)this.additionalParameters.hasOwnProperty(i)&&(t[i]=this.additionalParameters[i]);return e&&(t.mboxTarget=this.getMboxTarget(),t.mbox+="-clicked",t.mboxTime=this.getMboxTime()),t},handleClickResponse:function(){s.mboxClickRegistry[this.name]={state:r.RESOLVED},this._redirectLocation="",this.newWindowClick||(s.allClicksResolved()?(o.debug("Go to click url "+this.clickUrl),e.location=this.clickUrl,this._redirectLocation=this.clickUrl):o.debug("All clicks not resolved yet"))},isReportableClickUrl:function(e,t){return void 0!==e&&(t.length&&"true"===t.attr("data-mbox-ignore")?(o.debug("Click ignored"),!1):""!==e&&!/^(\#$|javascript)/.test(e))},isNewWindowClick:function(e,t){return 2===e.which||!(!t.length||"_blank"!==t.attr("target"))},isRightClick:function(e){return 3===e.which}}}(i,a,0,w,x),R=function(e,t){function i(e,t){this.paramsArray=e,this.isClickRequest=t,this.postParams=null,this.url=s,this.build()}var s="https://amazonwebservicesinc.tt.omtrdc.net/m2/amazonwebservicesinc/ubox/raw";return i.prototype={build:function(){this.postParams={};for(var i=0;i<this.paramsArray.length;i++){var s=this.paramsArray[i];for(var r in s)s.hasOwnProperty(r)&&(this.postParams[r]=s[r])}this.url=this.url+"?"+e({mboxPC:this.postParams.mboxPC,mboxSession:this.postParams.mboxSession,uniq:t.generateRandomId()})},_endpoint:s},i}(r,u),S=function(t,i,s){var r={crossDomain:!0,xhrFields:{withCredentials:!1}};return{get:function(e,t){this.makeAjaxCall(e,t,{type:"GET",url:this.url})},post:function(e,t,i){this.makeAjaxCall(e,t,{type:"POST",url:this.url,data:i})},makeAjaxCall:function(i,s,o){var n=this;t(o,r),this.requestStartTime=(new Date).getTime();var a=e.ajax(o).done(function(e,t,s){i.call(n,e,t,s)}).fail(function(e,t,i){s.call(n,e,t,i)});this.register(a)},register:function(e){var t=this;i.register(function(){return e.state()!==s.PENDING},function(){},function(){t.state=s.TIMEOUT,e.abort()},this.requestTimeout,100)},getRequestStartTime:function(){return this.requestStartTime},setRequestTimeout:function(e){return this.requestTimeout=Math.min(e,this.maxRequestTimeout),this},getRequestTimeout:function(){return this.requestTimeout},setAllTimeouts:function(e){this.maxRequestTimeout=e,this.requestTimeout=e},getMaxRequestTimeout:function(){return this.maxRequestTimeout},setUrl:function(e){return this.url=e,this},getPollingInterval:function(){return 100}}}(t,b,x),I=function(e,t,i,s){function r(e,i,r){this.logger=new t("TargetMediator"),this.callback=e,this.url=i.url,this.postData=i.postParams,this.isClickRequest=r,this.response=null,this.state=s.PENDING,this.setAllTimeouts(o)}var o=6e3,n={};return r.prototype={fetch:function(){this.logger.debug("awsm_:tm_TargetRequesterXHRStart","AI",{locationName:this.postData.mbox,isClickRequest:this.isClickRequest}),this.post(this.done,this.fail,this.postData)},done:function(e){this.logger.info("TargetRequester success for '"+this.postData.mbox+"' returned: "+e),this.logger.info("awsm_:tm_TargetRequesterXHRSuccess","AI",{value:(new Date).getTime()-this.requestStartTime,locationName:this.postData.mbox,isClickRequest:this.isClickRequest}),this.processResponseData(e),this.callback(this.response,this.state)},fail:function(e,t){this.state===s.TIMEOUT?this.logger.error("awsm_:tm_TargetRequesterTimeoutError","AI",{value:(new Date).getTime()-this.requestStartTime,locationName:this.postData.mbox,isClickRequest:this.isClickRequest}):this.logger.error("awsm_:tm_TargetRequesterXHRError","AI",{value:(new Date).getTime()-this.requestStartTime,locationName:this.postData.mbox,isClickRequest:this.isClickRequest,msg:t}),this.state=s.REJECTED,this.callback(this.response,this.state)},processResponseData:function(e){this.isClickRequest?this.state=s.RESOLVED:this.isUnassociatedOffer(e)?(this.logger.error("UnassociatedOfferError","LOCAL",{locationName:this.postData.mbox,isClickRequest:this.isClickRequest}),this.state=s.REJECTED):this.isValidRegularOffer(e)||this.isValidTransitionRegularOffer(e)?(this.response=this.parseResponseData(e),this.response?this.isDuplicateOffer(this.response.url)?(this.logger.error("awsm_:tm_DuplicateOfferError","AI",{locationName:this.postData.mbox,isClickRequest:this.isClickRequest}),this.state=s.REJECTED):(n[this.response.url]=!0,this.state=s.RESOLVED):this.state=s.REJECTED):this.isValidDefaultOffer(e)?(this.response=this.parseResponseData(e),this.response?this.state=s.RESOLVED:this.state=s.REJECTED):this.isErrorOffer(e)?(this.logger.error("awsm_:tm_TargetRequesterParameterError","AI",{locationName:this.postData.mbox,isClickRequest:this.isClickRequest,data:e}),this.state=s.REJECTED):(this.logger.error("awsm_:tm_InvalidOfferError","AI",{locationName:this.postData.mbox,isClickRequest:this.isClickRequest}),this.logger.error("InvalidOfferError: "+this.postData.mbox,"RAW"),this.state=s.REJECTED)},parseResponseData:function(e){try{return JSON.parse(e)}catch(e){return this.logger.error("awsm_:tm_UnparsableOfferError","AI",{locationName:this.postData.mbox,isClickRequest:this.isClickRequest}),{}}},isUnassociatedOffer:function(e){return"success"===e},isErrorOffer:function(e){return/^Mbox parameter \'(mbox|mboxTarget)\' not specified$/.test(e)},isValidDefaultOffer:function(e){return/^\{"defaultOffer":true,"campaignId":"[0-9]{1,40}","environmentId":"[0-9]{1,40}","userPCId":"[0-9\.\-_]{10,40}"\}$/.test(e)},isValidRegularOffer:function(e){return/^\{"url":"\/[a-z]{2}_[A-Z]{2}\/[a-zA-Z0-9\/_\.\-%\+\,\'\?\\#\$\&]+","campaignId":"[0-9]{1,40}","environmentId":"[0-9]{1,40}","userPCId":"[0-9\.\-_]{10,40}"\}$/.test(e)},isValidTransitionRegularOffer:function(e){return/^\{"url":"https?:\/\/aws\.amazon\.com\/[a-zA-Z0-9\/_\.\-%\+\,\'\?\\#\$\&]*","campaignId":"[0-9]{1,40}","environmentId":"[0-9]{1,40}","userPCId":"[0-9\.\-_]{10,40}"\}$/.test(e)},isDuplicateOffer:function(e){return e in n}},e(r.prototype,i),r}(v,a,S,x),E=function(e,t,i,s){function r(e){this.logger=new t("TargetMediator"),this.callback=e,this.data=null,this.state=s.PENDING,this.setAllTimeouts(o)}var o=4e3;return r.prototype={fetch:function(){this.logger.debug("awsm_:tm_AWSRequesterXHRStart","AI",{offerUrl:this.url}),this.get(this.done,this.fail)},done:function(e){this.data=e,this.logger.info("awsm_:tm_AWSRequesterXHRSuccess","AI",{value:(new Date).getTime()-this.requestStartTime,offerUrl:this.url}),this.state=s.RESOLVED,this.callback(this.data,this.state)},fail:function(e,t){this.state===s.TIMEOUT?this.logger.error("awsm_:tm_AWSRequesterTimeoutError","AI",{value:(new Date).getTime()-this.requestStartTime,offerUrl:this.url}):this.logger.error("awsm_:tm_AWSRequesterXHRError","AI",{value:(new Date).getTime()-this.requestStartTime,offerUrl:this.url,msg:t}),this.state=s.REJECTED,this.callback(this.data,this.state)}},e(r.prototype,i),r}(v,a,S,x),P=function(){return{pageLanguage:"en",defaultLanguage:"en",supportedLangCodes:["en"],supportedLangCodesHash:null,langCodeMapping:{"ar-SA":"ar","en-US":"en","es-ES":"es","de-DE":"de","fr-FR":"fr","id-ID":"id","it-IT":"it","ja-JP":"jp","ko-KR":"ko","pt-BR":"pt","ru-RU":"ru","th-TH":"th","tr-TR":"tr","vi-VN":"vi","zh-CN":"cn","zh-TW":"tw"},getLongLangCodeByShortcode:function(e){for(var t in this.langCodeMapping)if(this.langCodeMapping[t]===e)return t;return!1},isSupportedMboxName:function(e){return null===this.supportedLangCodesHash&&this.makeSupportedLangCodesHash(),"_"===e.substr(2,1)&&e.substring(0,2)in this.supportedLangCodesHash},isMboxNameMatchingPageLang:function(e){return e.substring(0,2)===this.pageLanguage},isPageLangSupported:function(){return null===this.supportedLangCodesHash&&this.makeSupportedLangCodesHash(),this.pageLanguage in this.supportedLangCodesHash},makeSupportedLangCodesHash:function(){this.supportedLangCodesHash={};for(var e=0,t=this.supportedLangCodes.length;e<t;e++)this.supportedLangCodesHash[this.supportedLangCodes[e]]=!0}}}(),k=function(e){return{replaceOrigin:function(e,t){var i=/^https?:\/\/([^:\/\s]+)/;return e.replace(i,t)},replaceOriginWithCurrent:function(t){var i=e.location.protocol+"//"+e.location.host;return this.replaceOrigin(t,i)}}}(i),y=function(e,t,i){function s(e,t,i,s,r){this.responseUrl=e,this.origin=t,this.fileSuffix=i,this.queryString=r,this.contentPath=s}return s.prototype={getUrl:function(){var e=this.responseUrl,s=/^https?:\/\/aws\.amazon\.com\//.test(e);if("/"===this.origin?(s||(e="https://s0.awsstatic.com"+e),e=t.replaceOriginWithCurrent(e)):e=s?t.replaceOrigin(e,this.origin):this.origin+e,e=this.appendUrlFileSuffix(e),e=this.appendUrlQueryString(e),e=this.prependUrlPathname(e),s){var r=/\/[a-z]{2}\/s\//,o=e.match(r);if(null!==o){var n=o[0].substring(1,3),a=i.getLongLangCodeByShortcode(n);e=e.replace(r,"/"+a.replace("-","_")+"/")}else e=e.replace(/\/s\//,"/en_US/")}return e},appendUrlFileSuffix:function(e){return e.match(/\/$/g)?"/"===this.fileSuffix?e:e.substr(0,e.length-1)+this.fileSuffix:e+this.fileSuffix},appendUrlQueryString:function(e){return e+this.queryString},prependUrlPathname:function(e){if(""!==this.contentPath){var t=e.indexOf("//"),i=e.indexOf("/",t+2);return e.substr(0,i)+this.contentPath+e.substr(i,e.length)}return e}},s}(0,k,P),T=function(t,i,s,r,o,n,a,h,u,l,c,g){function m(e,t){d=t,this.logger=new i("TargetMediator"),this.$elem=e,this.name=this.getName(e),this.time=this.getMboxTime(),this.additionalParameters=this.getAdditionalParameters(e),this.logger.info("Instantiate mbox '"+this.name+"'"),r.mboxRegistry[this.name]={state:g.PENDING}}var d;return m.prototype={fetch:function(){this.targetRequestDataBuilder=new o([this.getMboxParamsSet(!1),d.clientParamsSet],!1),this.awsRequester=new a(this.handleContentResponse.bind(this)),this.targetRequester=new n(this.handleOfferResponse.bind(this),this.targetRequestDataBuilder,!1),this.targetRequester.setRequestTimeout(d.options.offerTimeout).fetch()},handleOfferResponse:function(e,t){if(t===g.RESOLVED&&(this.updateVisitorId(e),this.environmentId=e.environmentId,this.campaignId=e.campaignId,r.mboxRegistry[this.name].campaignId=this.campaignId,r.mboxRegistry[this.name].environmentId=this.environmentId),t===g.RESOLVED&&void 0===e.defaultOffer){r.mboxRegistry[this.name].offerUrl=e.url;var i=new c(e.url,d.options.offerOrigin,d.options.offerFileSuffix,d.options.offerContentPath,d.options.offerQueryString);this.fetchOffer(i.getUrl())}else t===g.RESOLVED&&"boolean"==typeof e.defaultOffer&&e.defaultOffer?(r.mboxRegistry[this.name].isDefault=!0,this.showDefault(g.RESOLVED),this.setClickHandler()):this.showDefault(g.REJECTED)},fetchOffer:function(e){var t=Date.now()-this.targetRequester.getRequestStartTime(),i=d.options.offerTimeout-t;i>this.awsRequester.getPollingInterval()?this.awsRequester.setUrl(e).setRequestTimeout(i).fetch():this.showDefault(g.REJECTED)},handleContentResponse:function(e,t){t===g.RESOLVED?(this.$elem.html(e),this.showOffer(g.RESOLVED),this.setClickHandler()):this.showDefault(g.REJECTED)},setClickHandler:function(){var t=this,i=!1;this.$elem.on("click.aws-mbox, mouseup.aws-mbox",function(a){if(!s.isRightClick(a)){i||t.logger.debug("Clicked '"+t.name+"'");var h=e(a.target).closest("a");if(h.parents(".js-mbox").length&&(t.clickUrl=h.attr("href"),t.isReportableClickUrl(t.clickUrl,h)&&(t.newWindowClick=t.isNewWindowClick(a,h),t.newWindowClick||a.preventDefault(),!i))){i=!0,setTimeout(function(){i=!1},500),t.logger.info("Report click on '"+t.name+"'");var u=new o([t.getMboxParamsSet(!0),d.clientParamsSet],!0),l=new n(t.handleClickResponse.bind(t),u,!0);r.mboxClickRegistry[t.name]={state:g.PENDING},l.fetch()}}})},getName:function(e){var t=e.attr("data-mbox");if(this.validateName(t),0===t.indexOf(l.defaultLanguage)){var i=t.substring(2,t.length);t=l.pageLanguage+i}return t},validateName:function(e){return void 0===e?(this.showDefault(g.REJECTED),void this.logger.error("awsm_:tm_MboxNameError","AI",{msg:"'data-mbox' attribute is undefined"})):e.length>250?(this.showDefault(g.REJECTED),void this.logger.error("awsm_:tm_MboxNameError","AI",{msg:"'"+e+"' exceeds max length of 250 characters"})):/\s+$/.test(e)?(this.showDefault(g.REJECTED),void this.logger.error("awsm_:tm_MboxNameError","AI",{msg:"'"+e+"' has trailing whitespace"})):e in r.mboxRegistry?(this.showDefault(g.REJECTED),void this.logger.error("awsm_:tm_MboxNameError","AI",{msg:"'"+e+"' is already registered in the current page"})):l.isSupportedMboxName(e)?0===e.indexOf(l.defaultLanguage)||l.isMboxNameMatchingPageLang(e)?void 0:(this.showDefault(g.REJECTED),void this.logger.error("awsm_:tm_MboxNameError","AI",{msg:"'"+e+"' is not in the current page language"})):(this.showDefault(g.REJECTED),void this.logger.error("awsm_:tm_MboxNameError","AI",{msg:"'"+e+"' does not have a supported preceding locale code"}))},getAdditionalParameters:function(e){var t={},i=e.attr("data-params");if(void 0!==i)try{t=JSON.parse(i)}catch(e){this.logger.error("awsm_:tm_MboxParameterInvalidJsonError","AI",{msg:"'"+i+"' is not a valid JSON string"})}return t},updateVisitorId:function(e){var t=e.userPCId;if(d.clientParamsSet.mboxPC!==t)if(u.isValidVisitorId(t)){d.clientParamsSet.mboxPC=t,d.serverParamsSet.mboxPC=t;var i=new h("aws-target-visitor-id",{expireSeconds:33696e3});i.value=t,i.encode(),i.write()}else this.logger.error("awsm_:tm_InvalidVisitorIdFromTargetError","AI",{visitorId:t})},showDefault:function(e){this.show("default content",e)},showOffer:function(e){this.logger.debug("OfferInjectionSuccess","LOCAL",{locationName:this.name}),this.show("offer",e)},show:function(t,i){void 0!==this.name&&(r.mboxRegistry[this.name].state=i),this.$elem[0].style.visibility="visible",this.logger.debug("Show "+t+" for '"+this.name+"' with state '"+i+"'"),e(document).trigger("custom_libra_require_new-content"),e(document).trigger("custom_aws_da_new-content"),d.options.holdJqueryReady&&r.checkJqueryReadyHold()}},t(m.prototype,s),m}(v,a,C,w,R,I,E,g,f,P,y,x),D=function(t,i,s,r,o,n,a){function h(e,t){this.logger=new i("TargetMediator"),this.name=e.pageMboxName,this.environmentId=e.environmentId,this.campaignId=e.campaignId,this.serverParamsSet=t,this.time=this.getMboxTime(),r.mboxRegistry[this.name]={state:a.RESOLVED,isPageMbox:!0},this.logger.info("Instantiate page mbox '"+this.name+"'")}return h.prototype={setClickHandler:function(){var t=this,i=!1;e(document).on("click.aws-mbox, mouseup.aws-mbox",function(h){if(!s.isRightClick(h)){i||t.logger.debug("Page-clicked '"+t.name+"'");var u=e(h.target).closest("a");if(t.clickUrl=u.attr("href"),t.isReportableClickUrl(t.clickUrl,u)&&(t.newWindowClick=t.isNewWindowClick(h,u),t.newWindowClick||h.preventDefault(),!i)){i=!0,setTimeout(function(){i=!1},500),t.logger.info("Report page-click on '"+t.name+"'");var l=new o([t.getMboxParamsSet(!0),t.serverParamsSet],!0),c=new n(t.handleClickResponse.bind(t),l,!0);r.mboxClickRegistry[t.name]={state:a.PENDING},c.fetch()}}})}},t(h.prototype,s),h}(v,a,C,w,R,I,x),O=function(t,i,s,r,o,n,a,h,u,l,c,g,m){var d=new i("TargetMediator"),f={init:function(){var i=void 0!==s.TargetMediator?s.TargetMediator:{};this.options=t({},this.defaults,i);var a=!1,p=new h;p.hasCompleteParamsSet()?a=!0:(d.debug("Invalid data cookie. Not handling clicks for a page test."),a=!1);var v=new n("aws-target-static-id",{expireSeconds:31536e4});v.exists||(v.value=r.generateRandomId(),v.encode(),v.write());var b=new u(p,this.options.customParams);b.fetch(),f.clientParamsSet=b.getClientParamsSet(),f.serverParamsSet=b.getServerParamsSet();var x=o.hasCORSSupport();return p.write({support:(+x).toString(),campaignId:null,environmentId:null,mboxPage:null,mbox:null}),x?(m.supportedLangCodes=this.options.supportedLanguages,m.pageLanguage=this.options.pageLanguage,m.defaultLanguage=this.options.defaultLanguage,m.isPageLangSupported()?(this.options.holdJqueryReady&&e.holdReady(!0),this.options.isLoadedAtPageEnd?c.findMboxes(l,this):(c.hideAllMboxes(),c.pollToFindMboxes(l,this)),a&&new g(b.getPageMboxParamsSet(),f.serverParamsSet).setClickHandler(),void 0):(d.error("awsm_:tm_PageLangUnsupported","AI",{msg:"Mboxes not initialized because the page lang is not supported"}),void c.showAllMboxes())):(d.error("awsm_:tm_CORSUnsupported","AI",{msg:"Mboxes not initialized because CORS is not supported"}),void c.showAllMboxes())},clientParamsSet:{},serverParamsSet:{},MboxController:c,defaults:{pageLanguage:"en",defaultLanguage:"en",supportedLanguages:["en"],offerFileSuffix:"/index.html",offerContentPath:"",offerQueryString:"",offerOrigin:"https://s0.awsstatic.com",offerTimeout:1e4,holdJqueryReady:!1,isLoadedAtPageEnd:!1,customParams:{registrationStatus:a.registrationStatus,isIAMUser:a.isIAMUser}}};return f.init(),s.TargetMediator=f,f}(t,a,h,u,l,g,m,d,p,T,w,D,P)}()}(e)}).call(t,i(6))}},[864]);